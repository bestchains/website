"use strict";(self.webpackChunkbestchains=self.webpackChunkbestchains||[]).push([[467],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),k=r,d=u["".concat(s,".").concat(k)]||u[k]||m[k]||o;return n?a.createElement(d,l(l({ref:t},c),{},{components:n})):a.createElement(d,l({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=k;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},617:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:1,title:"Installation",sidebar_label:"Installation"},l=void 0,i={unversionedId:"QuickStart/installation",id:"QuickStart/installation",title:"Installation",description:"Bestchains provides insaller which helps install Bestchains quickly.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/QuickStart/installation.md",sourceDirName:"QuickStart",slug:"/QuickStart/installation",permalink:"/website/en/docs/QuickStart/installation",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Installation",sidebar_label:"Installation"},sidebar:"docsSidebar",previous:{title:"\u5feb\u901f\u5f00\u59cb",permalink:"/website/en/docs/category/\u5feb\u901f\u5f00\u59cb"},next:{title:"Usage",permalink:"/website/en/docs/QuickStart/usage"}},s={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Introduction to the basic components",id:"introduction-to-the-basic-components",level:2},{value:"u4a-component",id:"u4a-component",level:3},{value:"baas-component",id:"baas-component",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Manual deployment",id:"manual-deployment",level:2},{value:"1. Install u4a-component",id:"1-install-u4a-component",level:3},{value:"2. Install baas-component",id:"2-install-baas-component",level:3},{value:"3. Install blockchain explorer",id:"3-install-blockchain-explorer",level:3},{value:"4. Install Pipeline",id:"4-install-pipeline",level:3},{value:"Access",id:"access",level:2}],c={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Bestchains provides ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bestchains/installer"},"insaller")," which helps install ",(0,r.kt)("inlineCode",{parentName:"p"},"Bestchains")," quickly.\nYou can follow theses steps."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/install/"},"Docker"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install ",(0,r.kt)("a",{parentName:"p",href:"https://kind.sigs.k8s.io/docs/user/quick-start/#installation"},"kind"),", If you already have a Kubernetes cluster, you do not need to install Kind.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install ",(0,r.kt)("a",{parentName:"p",href:"https://helm.sh/docs/intro/install/"},"helm"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/tools/#kubectl"},"kubectl"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Get source code"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/bestchains/installer.git\n")))),(0,r.kt)("h2",{id:"introduction-to-the-basic-components"},"Introduction to the basic components"),(0,r.kt)("h3",{id:"u4a-component"},"u4a-component"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/kubernetes/ingress-nginx"},"ingress-nginx")),"  "),(0,r.kt)("p",{parentName:"li"},"  ingress-nginx is an Ingress controller for Kubernetes using NGINX as a reverse proxy and load balancer.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://cert-manager.io/"},"cert-manager")),"  "),(0,r.kt)("p",{parentName:"li"},"  cert-manager adds certificates and certificate issuers as resource types in Kubernetes clusters,\nand simplifies the process of obtaining, renewing and using those certificates.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"bff-server"),"  "),(0,r.kt)("p",{parentName:"li"},"  Provides an operator interface for the user.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"oidc-server"),"  "),(0,r.kt)("p",{parentName:"li"},"  Is based on a reverse proxy inside Kubernetes that uses OIDC to authenticate requests."))),(0,r.kt)("h3",{id:"baas-component"},"baas-component"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/bestchains/fabric-operator"},"fabric-operator")),"  "),(0,r.kt)("p",{parentName:"li"},"  fabric-operator is an open-source, cloud-native Operator for managing Hyperledger Fabric networks on Kubernetes.\nThe operator follows the CNCF Operator Pattern, reducing the minutia of performing repetitive,\ndetailed configuration tasks to automated activities performed under the guidance of software-based controllers.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/bestchains/bc-apis"},"bc-apis")),"  "),(0,r.kt)("p",{parentName:"li"},"  Provides some combination of APIs to manipulate the resources created by the fabric-operator.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/bestchains/bc-explorer"},"bc-explorer")),"  "),(0,r.kt)("p",{parentName:"li"}," Blockchain browser, browse to view transactions, blocks and other data.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://min.io/"},"minio")),"  "),(0,r.kt)("p",{parentName:"li"},"  Object storage services.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://tekton.dev/docs/operator/"},"tekton-operator")),"  "),(0,r.kt)("p",{parentName:"li"},"  Tekton Operator is a Kubernetes extension that to install,\nupgrade and manage TektonCD Pipelines, Dashboard, Triggers (and other components) on any Kubernetes Cluster."))),(0,r.kt)("h2",{id:"quick-start"},"Quick Start"),(0,r.kt)("p",null,"If you do not currently have a Kubernetes cluster, run the following command to create a cluster using ",(0,r.kt)("inlineCode",{parentName:"p"},"kind"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd installer\nmake kind\n")),(0,r.kt)("p",null,"Execute the following command to quickly deploy all services of bestnchains."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd installer\nmake e2e\n")),(0,r.kt)("h2",{id:"manual-deployment"},"Manual deployment"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note"),(0,r.kt)("br",{parentName:"p"}),"\n","Some components have a dependency order for installation.\nThe u4a-component, which provides the basic services of the platform,\nincluding authentication, certificate management, etc, needs to be deployed first.\nThen the baas-componet, addon and other components are deployed.")),(0,r.kt)("p",null,"Before installing, first plan the installation nodes for ingress-nginx and kube-oidc-proxy.\n",(0,r.kt)("strong",{parentName:"p"},"Don't use the same Kubernetes node for both services")," and modify ",(0,r.kt)("inlineCode",{parentName:"p"},"scripts/e2e.sh"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'ingressNode="<your-ingress-node-name>"\nkubeProxyNode="<your-oidc-node-name>"\n')),(0,r.kt)("h3",{id:"1-install-u4a-component"},"1. Install u4a-component"),(0,r.kt)("p",null,"Execute the following command to install it separately."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./scripts/e2e.sh --u4a\n")),(0,r.kt)("p",null,"To check the Pod status of the service and confirm successful deployment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"root@macbookpro:~# kubectl get po -nu4a-system\nNAME                                                          READY   STATUS    RESTARTS   AGE\nbff-server-76c4567bc4-4p9kt                                   1/1     Running   0          6m40s\ncapsule-controller-manager-5b9864f9bf-qgfnl                   1/1     Running   0          6m40s\ncert-manager-79d7998d9-tjmsm                                  1/1     Running   0          11m\ncert-manager-cainjector-57bb7f44dd-7jksz                      1/1     Running   0          11m\ncert-manager-webhook-65b494ccf4-7s62c                         1/1     Running   0          11m\ncluster-component-ingress-nginx-controller-86685d68f7-sm5qc   1/1     Running   0          11m\nkube-oidc-proxy-85ff576b49-d2znt                              1/1     Running   0          6m40s\noidc-server-86c769c5f6-xm6rb                                  2/2     Running   0          6m40s\nresource-view-controller-94645667-khwq5                       1/1     Running   0          6m40s\n")),(0,r.kt)("h3",{id:"2-install-baas-component"},"2. Install baas-component"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"baas-component")," contains the four services ",(0,r.kt)("inlineCode",{parentName:"p"},"fabric-operator"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"bc-apis"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"minio"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"tekton-operator"),".\nWhere ",(0,r.kt)("inlineCode",{parentName:"p"},"minio")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"tekton-operator")," are dependent components, the two services ",(0,r.kt)("inlineCode",{parentName:"p"},"fabirc-operator"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"bc-apis")," will be deployed together."),(0,r.kt)("p",null,"Execute the following command to install them:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./scripts/e2e.sh --baas\n")),(0,r.kt)("p",null,"To check the Pod status of the service and confirm successful deployment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"root@macbookpro:~# kubectl get po -ntekton-pipelines\nNAME                                                READY   STATUS    RESTARTS   AGE\ntekton-operator-proxy-webhook-875cf7f97-bx2zp       1/1     Running   0          10m\ntekton-pipelines-controller-76b57458b6-44qlh        1/1     Running   0          10m\ntekton-pipelines-remote-resolvers-ff696f9b6-zhjbk   1/1     Running   0          10m\ntekton-pipelines-webhook-7569bb59c6-6v522           1/1     Running   0          10m\nroot@macbookpro:~# kubectl get po -nbaas-system\nNAME                                              READY   STATUS    RESTARTS      AGE\nbff-apis-75486dcfdc-szkff                         1/1     Running   0             23m\ncontroller-manager-5956cdd95b-d5hvn               1/1     Running   1 (11m ago)   14m\nfabric-minio-0                                    1/1     Running   0             23m\nfabric-minio-1                                    1/1     Running   0             23m\nfabric-minio-2                                    1/1     Running   0             23m\nfabric-tekton-operator-c99c87f8f-wmbhk            2/2     Running   0             23m\nfabric-tekton-operator-webhook-5f88c755db-s58f8   1/1     Running   0             23m\n")),(0,r.kt)("h3",{id:"3-install-blockchain-explorer"},"3. Install blockchain explorer"),(0,r.kt)("p",null,"Execute the following commands to install the blockchain browser and postgresql."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./scripts/e2e.sh --explorer\n")),(0,r.kt)("p",null,"To check the Pod status of the service and confirm successful deployment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"root@macbookpro:~# kubectl get po -nbaas-system\nNAME                                              READY   STATUS    RESTARTS      AGE\nbc-explorer-6d6c48d57f-h62lx                      3/3     Running   0             38s\nbc-explorer-postgresql-0                          1/1     Running   0             3m17s\n")),(0,r.kt)("h3",{id:"4-install-pipeline"},"4. Install Pipeline"),(0,r.kt)("p",null,"piepline is used to build contract images."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./scripts/e2e.sh --tekton-task-pipeline\n")),(0,r.kt)("p",null,"Installation complete, view resources after installation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"root@macbookpro:~# kubectl get pipeline \nNAME                    AGE\nchaincodebuild          15s\nchaincodebuild-kaniko   14s\n")),(0,r.kt)("h2",{id:"access"},"Access"),(0,r.kt)("p",null,"After deploying the service via ",(0,r.kt)("a",{parentName:"p",href:"#quick-start"},"Quick Start")," or ",(0,r.kt)("a",{parentName:"p",href:"#manual-deployment"},"Manual deployment")),(0,r.kt)("p",null,"Find the access address with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"root@macbookpro:~# kubectl get ingress -nu4a-system\nNAME                        CLASS    HOSTS                      ADDRESS      PORTS     AGE\nbff-server-ingress          <none>   portal.172.18.0.5.nip.io   172.18.0.5   80, 443   59m\nbff-server-ingress-socket   <none>   portal.172.18.0.5.nip.io   172.18.0.5   80, 443   59m\n")),(0,r.kt)("p",null,"Access the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://portal.172.18.0.5.nip.io")," service via your browser."))}m.isMDXComponent=!0}}]);